<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Event</title>
    <link rel="stylesheet" href="create-events.css">
</head>

<body>

    <header class="header">
        <h1>Event<span class="header-text">Hive</span></h1>
        <nav>
            <a href="signin.html">Login</a>
            <a href="signup.html" class="signup">Signup</a>
        </nav>
    </header>

    <div class="container">
        <h1 class="title">Create Event</h1>

        <form id="createEventForm">
            <div class="row">
                <div class="form-group">
                    <label for="eventCategory">Category</label>
                    <select id="eventCategory">
                        <option value="event">Event</option>
                        <option value="conference">Conference</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="eventTitle">Title</label>
                    <input type="text" id="eventTitle" placeholder="Enter title" required>
                </div>
            </div>


            <div class="form-group">
                <label for="Venue">Venue</label>
                <input type="text" id="Venue" placeholder="Enter venue" required>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="startTime">Start Time</label>
                    <input type="time" id="startTime" required>
                </div>
                <div class="form-group">
                    <label for="endTime">End Time</label>
                    <input type="time" id="endTime" required>
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" id="startDate" required>
                </div>
                <div class="form-group">
                    <label for="endDate">End Date</label>
                    <input type="date" id="endDate" required>
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="eventType">Type</label>
                    <select id="eventType">
                        <option value="free">Free</option>
                        <option value="paid">Paid</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="eventPrice">Price $</label>
                    <input type="number" id="eventPrice" placeholder="Enter price" min="0" disabled>
                </div>
            </div>

            <h2 class="section-title">Description</h2>

            <div class="form-group">
                <label for="Image">Image</label>
                <div class="image-upload">
                    <input type="file" id="Image" accept="image/*">
                </div>
            </div>

            <div class="form-group">
                <label for="Description">Description</label>
                <textarea id="Description" placeholder="Type here..." required></textarea>
            </div>

            <button type="submit">Create</button>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("createEventForm");
            const eventType = document.getElementById("eventType");
            const eventPrice = document.getElementById("eventPrice");

            eventType.addEventListener("change", function () {
                if (eventType.value === "paid") {
                    eventPrice.removeAttribute("disabled");
                } else {
                    eventPrice.value = "";
                    eventPrice.setAttribute("disabled", "true");
                }
            });

            form.addEventListener("submit", function (event) {
                event.preventDefault();

                const eventData = {
                    category: document.getElementById("eventCategory").value,
                    title: document.getElementById("eventTitle").value.trim(),
                    venue: document.getElementById("Venue").value.trim(),
                    startTime: document.getElementById("startTime").value,
                    endTime: document.getElementById("endTime").value,
                    startDate: document.getElementById("startDate").value,
                    endDate: document.getElementById("endDate").value,
                    type: eventType.value,
                    price: eventType.value === "paid" ? eventPrice.value.trim() : "0",
                    description: document.getElementById("Description").value.trim(),
                };

                if (Object.values(eventData).some(value => value === "")) {
                    showPopup("Please fill out all required fields.", "error");
                    return;
                }

                let events = JSON.parse(localStorage.getItem("events")) || [];
                events.push(eventData);
                localStorage.setItem("events", JSON.stringify(events));

                showPopup("Event Created Successfully!", "success");

                setTimeout(() => {
                    window.location.href = "all-events.html";
                }, 2000);
            });

            function showPopup(message, type) {
                const popup = document.createElement("div");
                popup.className = `popup ${type}`;
                popup.innerText = message;
                document.body.appendChild(popup);

                setTimeout(() => {
                    popup.classList.add("show");
                }, 100);

                setTimeout(() => {
                    popup.classList.remove("show");
                    setTimeout(() => popup.remove(), 500);
                }, 2500);
            }
        });


    </script>
</body>

</html>